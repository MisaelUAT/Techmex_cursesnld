<main>
  <div
    class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom"
  >
    <div class="btn-toolbar mb-2 mb-md-0">
      <div class="btn-group me-2">
        <button
          type="button"
          class="btn btn-sm btn-outline-secondary"
          data-bs-toggle="modal"
          data-bs-target="#agregar"
          (click)="Agregar_Tarjeta()"
        >
          Agregar
        </button>
        <button type="button" class="btn btn-sm btn-outline-secondary">Imprimir</button>
      </div>
    </div>
  </div>

  <!-- Modal -->
  <div
    class="modal fade"
    id="agregar"
    tabindex="-1"
    aria-labelledby="exampleModalLabel"
    aria-hidden="true"
  >
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" *ngIf="proceso_agregar">Agregar Usuario</h1>
          <h1 class="modal-title fs-5" *ngIf="proceso_editar">Editar Usuario</h1>
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="modal"
            aria-label="Close"
          ></button>
        </div>

        <!-- Formulario -->
        <div class="modal-body">
          <!-- <form class="row">

            <div class="col-md-6">
              <label for="Correo" class="form-label">Numero de Tarjeta</label>
              <input
                type="text"
                class="form-control"
                id="numero_tarjeta"
                [(ngModel)]="form_metodoPago.numero_tarjeta"
                name="numero_tarjeta"
              />
            </div>

            <div class="col-md-6">
              <label for="Contrasena" class="form-label">Banco</label>
              <input
                type="text"
                class="form-control"
                id="banco"
                [(ngModel)]="form_metodoPago.banco"
                name="banco"
              />
            </div>

            <div class="col-md-6">
              <label for="Nombre" class="form-label">Tipo de Tarjeta</label>
              <input
                type="text"
                class="form-control"
                id="tipo_tarjeta"
                [(ngModel)]="form_metodoPago.tipo_tarjeta"
                name="tipo_tarjeta"
              />
            </div>

            <div class="col-md-6">
              <label for="Apellidos" class="form-label">Vencimiento</label>
              <input
                type="text"
                class="form-control"
                id="vencimiento"
                [(ngModel)]="form_metodoPago.vencimiento"
                name="vencimiento"
              />
            </div>

            <div class="col">
              <label for="Activo" class="form-label">CCV</label>
              <input
                class="form-check-input ms-md-1"
                type="checkbox"
                id="ccv"
                [(ngModel)]="form_metodoPago.ccv"
                name="ccv"
              />
            </div>
          </form> -->

          <form>
            <div class="d-flex flex-column align-items-center mt-2 mb-3">
              <label for="numero_tarjeta" class="form-label text-secondary fw-bold">
                Numero de Tarjeta
              </label>
              <input
                type="text"
                id="numero_tarjeta"
                name="numero_tarjeta"
                [(ngModel)]="form_metodoPago.numero_tarjeta"
                class="form-control w-75"
                required
              />
            </div>

            <div class="d-flex flex-column align-items-center mt-2 mb-3">
              <label for="nombre_banco" class="form-label text-secondary fw-bold"> Banco </label>
              <input
                type="text"
                id="nombre_banco"
                name="nombre_banco"
                [(ngModel)]="form_metodoPago.banco"
                class="form-control w-75"
                required
              />
            </div>

            <div class="d-flex flex-column align-items-center mt-2 mb-3">
              <label for="tipo_tarjeta" class="form-label text-secondary fw-bold">
                Tipo de Tarjeta
              </label>
              <select
                id="tipo_tarjeta"
                name="tipo_tarjeta"
                class="form-select w-50"
                [(ngModel)]="form_metodoPago.tipo_tarjeta"
                required
              >
                <option value="Debito">Debito</option>
                <option value="Credito">Credito</option>
              </select>
            </div>

            <div class="d-flex flex-column align-items-center mt-2 mb-3">
              <label for="pin" class="form-label text-secondary fw-bold"> CCV </label>
              <input
                type="text"
                id="ccv"
                name="ccv"
                [(ngModel)]="form_metodoPago.ccv"
                class="form-control w-25"
                required
              />
            </div>

            <div class="d-flex flex-column align-items-center mt-2 mb-3">
              <label for="vencimiento_input" class="form-label text-secondary fw-bold">
                Vencimiento
              </label>
              <input
                type="text"
                id="vencimiento_input"
                name="vencimiento"
                [(ngModel)]="form_metodoPago.vencimiento"
                class="form-control w-25"
                required
              />
            </div>
          </form>
        </div>

        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
          <button
            type="button"
            class="btn btn-primary"
            (click)="Guardar_Tarjeta()"
            *ngIf="proceso_agregar"
          >
            Guardar
          </button>
          <button
            type="button"
            class="btn btn-primary"
            (click)="Actualizar_Tarjeta()"
            *ngIf="proceso_editar"
          >
            Actualizar
          </button>
        </div>
      </div>
    </div>
  </div>

  <h2>Metodos de Pago</h2>
  <div class="table-responsive small">
    <table class="table table-striped table-sm">
      <thead>
        <tr>
          <th>Numero de Tarjeta</th>
          <th>Banco</th>
          <th>Tipo de Tarjeta</th>
          <th>CCV</th>
          <th>Vencimiento</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let tarjeta of registros">
          <td>{{ tarjeta.numero_tarjeta }}</td>
          <td>{{ tarjeta.banco }}</td>
          <td>{{ tarjeta.tipo_tarjeta }}</td>
          <td>{{ tarjeta.ccv }}</td>
          <td>{{ tarjeta.vencimiento }}</td>
          <td>
            <button
              type="button"
              class="btn btn-warning btn-sm text-white"
              data-bs-toggle="modal"
              data-bs-target="#agregar"
              (click)="Editar_Tarjeta(registro = tarjeta)"
            >
              Editar
            </button>
            <button
              type="button"
              class="btn btn-danger btn-sm text-white ms-1"
              data-bs-toggle="modal"
              data-bs-target="#exampleModal"
            >
              Eliminar
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="toast-container position-fixed bottom-0 end-0 p-3">
    <div
      id="liveToast"
      class="toast align-items-center text-white bg-success border-0"
      role="alert"
    >
      <div class="d-flex">
        <div class="toast-body">
          <!-- Proceso realizado correctamente âœ… -->
        </div>
        <button
          type="button"
          class="btn-close btn-close-white me-2 m-auto"
          data-bs-dismiss="toast"
          aria-label="Close"
        ></button>
      </div>
    </div>
  </div>

  <div
    class="modal fade"
    id="exampleModal"
    tabindex="-1"
    aria-labelledby="exampleModalLabel"
    aria-hidden="true"
  >
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="exampleModalLabel">Eliminar Registro</h1>
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="modal"
            aria-label="Close"
          ></button>
        </div>
        <div class="modal-body"> Deseas Eliminar esta Tarjeta? </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary" (click)="Eliminar_Tarjeta(registro,true)">
            Confirmar
          </button>
        </div>
      </div>
    </div>
  </div>
</main>
